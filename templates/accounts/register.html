
{% extends 'base.html' %}

{% load static %}
{% block content %}

{% comment %} 
<header id="home" class="header-area">

    <div class="shape header-shape-one" style="top: 216px;left: 222px;transform: rotate(124deg); ">
        <img src="{% static '/images/banner/shape/shape-1.png' %}" alt="shape">
    </div> <!-- header shape one -->

    
    </div> <!-- header shape three --> 

    <div class="shape header-shape-fore" style="left: 67%;bottom: -208px;">
        <img src="{% static '/images/banner/shape/shape-4.png' %}" alt="shape">
    </div> <!-- header shape three -->



</header> {% endcomment %}

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
 
<section class="section-content padding-y" style="display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
background: url(https://c4.wallpaperflare.com/wallpaper/633/523/640/fantasy-art-digital-art-artwork-blood-wallpaper-preview.jpg) no-repeat;
background-size: cover;
background-position: center;">
    <link rel="stylesheet" href="{% static '/css/reg.css' %}">
<!-- ============================ COMPONENT REGISTER   ================================= -->
        <div class="card mx-auto" >
          <article class="card-body">
            {% include 'includes/alerts.html' %}
            <header class="mb-4">
                <div class="reqh" style="margin-top:5px;padding-bottom:5px;-webkit-text-stroke: thick;padding: 0% 10% 0 10%;" >
                <h4 class="card-title" >SIGN UP</h4>
                </div>
            </header>
            <form action="{% url 'register' %}" method="POST">
                {% csrf_token %}

             
                    <div class="form-row" style="flex-wrap: inherit;">
                        
                        <div class="col form-group">
                           
                            {{form.first_name}}
                        </div> <!-- form-group end.// -->
                        <div class="col form-group">

                            {{form.last_name}}
                        </div> <!-- form-group end.// -->
                    </div> <!-- form-row end.// -->
                    <div class="form-group">
                        <label></label>
                        {{form.email}}
                        <small class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div> <!-- form-group end.// -->
                    <div class="gender-cont">
                    {% for radio in form.gender %}
                      <label style="--clr:#6be7ff;" class="label-cont">
                        {{ radio.tag }}
                        <i class="tick"></i>
                          <span class="choice">{{ radio.choice_label }}</span>
                       </label>
                      {% endfor %}
                     </div> <!-- form-group end.// -->
                    <div class="form-row">
                        
                        <div class="form-group col-md-6">
                            <label></label>
                            {{ form.state }}
                        </div>
                        <div class="form-group col-md-6">
                            <label></label>
                            {{ form.district }}
                        </div><!-- form-group end.// -->
                    </div> <!-- form-row.// -->
                    <div class="form-row " >
                        
                        <div class="form-group col-md-6">
                            <label></label>
                            {{ form.blood_type }}
                        </div>
                        <div id="id_other_blood_type_row" style="display: none;">
                            {{ form.other_blood_type }}
                        </div>
                        <div class="form-group col-md-6">
                            <label></label>
                            {{ form.city }}
                        </div><!-- form-group end.// -->
                    </div> <!-- form-row.// -->
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label></label>
                            {{form.password}}
                        </div> <!-- form-group end.// --> 
                        <div class="form-group col-md-6">
                            <label></label>
                            {{form.confirm_password}}
                        </div> <!-- form-group end.// -->  
                    </div>
                    <div class="form-group " style="margin-top: 23px; color:#fff">
                        
                        <label for="{{ form.is_donor.id_for_label }}">Enable Donor</label>

                        {{ form.is_donor }}
                      </div>
                      <!--Check box -->

                     
                      <!--End of checkbox-->
                    <div class="form-group">
                        <button type="submit" class="btn"> 
                            Register  
                           
                            <span class="second"></span>
                            <span class="third"></span>
                            <div class="fill-container"></div>
                        </button>
                    </div> <!-- form-group// -->      
                    {{form.email.errors}}
                    {{ form.non_field_errors }}
                </form>
            </article><!-- card-body.// -->
            <p class="text-center mt-4">Have an account? <a href="{% url 'login' %}">Log In</a></p>
        </div> <!-- card .// -->
        
        
        <br><br>
    <!-- ============================ COMPONENT REGISTER  END.// ================================= -->
    </section>
    <div id="popup" class="popup-container">
        <div class="popup-content">
            <p>By enabling the donor feature, you need to update your Full profile. And also you agree to the terms and conditions.</p>
            <button id="agreeBtn">Agree</button>
        </div>
    </div>
 
    <!-- Add this in the <body> section of your HTML template, after rendering the form -->
        <script>
            $(document).ready(function() {
                // Define the district choices for each state
                var districtChoices = {
                    'Select state': [['', 'Select District']],
                    'Kerala': [
                        ['', 'Select District'],
                        ['Thiruvananthapuram', 'Thiruvananthapuram'],
                        ['Kollam', 'Kollam'],
                        ['Alappuzha', 'Alappuzha'],
                        ['Pathanamthitta', 'Pathanamthitta'],
                        ['Kottayam', 'Kottayam'],
                        ['Idukki', 'Idukki'],
                        ['Thrissur', 'Thrissur'],
                        ['Palakkad', 'Palakkad'],
                        ['Malappuram', 'Malappuram'],
                        ['Kozhikode', 'Kozhikode'],
                        ['Wayanad', 'Wayanad'],
                        ['Kannur', 'Kannur'],
                        ['Kasaragod', 'Kasaragod'],
                    ],
                    // Add choices for other states if necessary
                };
            
                // Handle state change event
                $('#id_state').change(function() {
                    var selectedState = $(this).val();
                    var districtSelect = $('#id_district');
            
                    // Clear existing options
                    districtSelect.find('option').remove();
            
                    // Populate district choices based on the selected state
                    $.each(districtChoices[selectedState], function(index, district) {
                        districtSelect.append($('<option>').text(district[1]).attr('value', district[0]));
                    });
                });
            });
        </script>
        
        <script>
            $(document).ready(function() {
                // Handle blood type change event
                $('#id_blood_type').change(function() {
                    var selectedBloodType = $(this).val();
                    var otherBloodTypeField = $('#id_other_blood_type_row');
    
                    // Show/hide other blood type field based on the selection
                    if (selectedBloodType === 'Other') {
                        otherBloodTypeField.show();
                    } else {
                        otherBloodTypeField.hide();
                    }
                });
            });
        </script>
    
        <script>
            // Get the popup element
            var popup = document.getElementById("popup");
        
            // Get the agree button
            var agreeBtn = document.getElementById("agreeBtn");
        
            // Get the checkbox element
            var checkbox = document.getElementById("{{ form.is_donor.id_for_label }}");
        
            // Add event listener to the checkbox
            checkbox.addEventListener("change", function() {
                if (this.checked) {
                    // Show the popup
                    popup.style.display = "block";
                } else {
                    // Hide the popup if the checkbox is unchecked
                    popup.style.display = "none";
                }
            });
        
            // Add event listener to the agree button
            agreeBtn.addEventListener("click", function() {
                // Close the popup
                popup.style.display = "none";
        
                // Set the checkbox as checked
                checkbox.checked = true;
            });
        </script>
        <style>
            .popup-container {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }
        
            .popup-content {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: white;
                padding: 20px;
                border-radius: 5px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
                text-align: center;
            }
        
            #agreeBtn {
                margin-top: 10px;
                padding: 8px 20px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
        </style>
    {% endblock %}